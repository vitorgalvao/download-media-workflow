<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>bundleid</key>
	<string>com.vitorgalvao.alfred.downloadmedia</string>
	<key>connections</key>
	<dict>
		<key>24B8A81E-9901-45A9-B7BC-3D4134C8675A</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>B7A122F2-DA1A-4CF7-9990-9F4614C960CC</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>2BACFF19-7459-42F6-B8F4-6CFCA9B3CAFF</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>F43FB5B8-4078-449C-9631-FE56025810D3</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>3B69F416-A08B-4618-99B6-E2AED211C9D8</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>BDEED30D-47F5-468D-899C-0AD5D4FFAADB</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>3E1231DB-0667-46DE-9AD3-523D8837F824</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>6A286F10-FD49-4463-9540-0EECBE45438D</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>6A286F10-FD49-4463-9540-0EECBE45438D</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>2BACFF19-7459-42F6-B8F4-6CFCA9B3CAFF</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>822C7F03-3A3A-4842-8C03-72F2D4096BF0</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>24B8A81E-9901-45A9-B7BC-3D4134C8675A</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>83B54D25-39A4-4BCE-94DA-1DFB84D37270</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>BFD78A9F-0242-46A6-982A-9DA120AB8328</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>84E17C6A-F77E-4F2A-B7AD-DA0793F8C416</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>B50278C3-F6C2-4103-A37B-B0901BE5723C</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>879AF67B-0DE2-4574-A27B-A502D1E8A123</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>B93448AD-3457-4CBA-B37D-1242E4A92C44</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>sourceoutputuid</key>
				<string>D0536D2A-6ED4-4A74-8053-7030F75D665F</string>
				<key>vitoclose</key>
				<false/>
			</dict>
			<dict>
				<key>destinationuid</key>
				<string>A8F4BBFD-E8A8-47D3-AE33-A8823E7CC291</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>897635FA-F5E6-4554-A0FE-0A84D9156F9C</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>3E1231DB-0667-46DE-9AD3-523D8837F824</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>95D9599B-65C1-410E-85B5-BB36F1676000</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>84E17C6A-F77E-4F2A-B7AD-DA0793F8C416</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>A5F1E477-6809-406A-A350-931125A6F529</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>6A286F10-FD49-4463-9540-0EECBE45438D</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>B50278C3-F6C2-4103-A37B-B0901BE5723C</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>E2D161C0-42E9-4D32-BDE6-FED4C715066F</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>sourceoutputuid</key>
				<string>EED64F19-BE23-4767-8EEB-AB7DA5278BFC</string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>B729925C-D828-4631-9988-67499E05791C</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>BFD78A9F-0242-46A6-982A-9DA120AB8328</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>B7A122F2-DA1A-4CF7-9990-9F4614C960CC</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>C80AD651-BCAF-4B86-869A-D4D847A2379B</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>B93448AD-3457-4CBA-B37D-1242E4A92C44</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>6A286F10-FD49-4463-9540-0EECBE45438D</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>BDEED30D-47F5-468D-899C-0AD5D4FFAADB</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>879AF67B-0DE2-4574-A27B-A502D1E8A123</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>BFD78A9F-0242-46A6-982A-9DA120AB8328</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>6A286F10-FD49-4463-9540-0EECBE45438D</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>C80AD651-BCAF-4B86-869A-D4D847A2379B</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>A5F1E477-6809-406A-A350-931125A6F529</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>D3A7A89F-92D3-4FC6-B561-20BBF3CDE6CE</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>FD70A114-2767-4782-8D5F-86AC4B3BB8B3</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>D8524846-F942-4A77-9461-8BAED974B8CF</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>C80AD651-BCAF-4B86-869A-D4D847A2379B</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>DC74421D-631A-44B1-AC86-ED7793CADE26</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>3E1231DB-0667-46DE-9AD3-523D8837F824</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>E2D161C0-42E9-4D32-BDE6-FED4C715066F</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>F9B90B13-958B-44A4-A9B0-9B92E4C6FEE4</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>sourceoutputuid</key>
				<string>_button1</string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>F43FB5B8-4078-449C-9631-FE56025810D3</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>95D9599B-65C1-410E-85B5-BB36F1676000</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>sourceoutputuid</key>
				<string>0BC66730-6EE7-4E58-B4AA-61C984B7ED91</string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>FD70A114-2767-4782-8D5F-86AC4B3BB8B3</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>A5F1E477-6809-406A-A350-931125A6F529</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
	</dict>
	<key>createdby</key>
	<string>Vítor Galvão</string>
	<key>description</key>
	<string>Download video and audio from web pages</string>
	<key>disabled</key>
	<false/>
	<key>name</key>
	<string>Download Media</string>
	<key>objects</key>
	<array>
		<dict>
			<key>config</key>
			<dict>
				<key>acceptsfiles</key>
				<false/>
				<key>acceptsmulti</key>
				<integer>0</integer>
				<key>acceptstext</key>
				<false/>
				<key>acceptsurls</key>
				<true/>
				<key>name</key>
				<string>Download Video</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.trigger.universalaction</string>
			<key>uid</key>
			<string>897635FA-F5E6-4554-A0FE-0A84D9156F9C</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>argument</key>
				<string></string>
				<key>passthroughargument</key>
				<true/>
				<key>variables</key>
				<dict>
					<key>media_type</key>
					<string>video</string>
				</dict>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.argument</string>
			<key>uid</key>
			<string>3E1231DB-0667-46DE-9AD3-523D8837F824</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>alfredfiltersresults</key>
				<false/>
				<key>alfredfiltersresultsmatchmode</key>
				<integer>0</integer>
				<key>argumenttreatemptyqueryasnil</key>
				<false/>
				<key>argumenttrimmode</key>
				<integer>0</integer>
				<key>argumenttype</key>
				<integer>2</integer>
				<key>escaping</key>
				<integer>0</integer>
				<key>keyword</key>
				<string>{var:download_video_keyword}</string>
				<key>queuedelaycustom</key>
				<integer>1</integer>
				<key>queuedelayimmediatelyinitially</key>
				<false/>
				<key>queuedelaymode</key>
				<integer>0</integer>
				<key>queuemode</key>
				<integer>1</integer>
				<key>runningsubtext</key>
				<string>Grabbing URLs…</string>
				<key>script</key>
				<string>function runCommand(...arguments) {
  const task = $.NSTask.alloc.init
  const stdout = $.NSPipe.pipe

  task.executableURL = $.NSURL.fileURLWithPath("/usr/bin/env")
  task.arguments = arguments
  task.standardOutput = stdout
  task.launchAndReturnError(false)

  const dataOut = stdout.fileHandleForReading.readDataToEndOfFileAndReturnError(false)
  const stringOut = $.NSString.alloc.initWithDataEncoding(dataOut, $.NSUTF8StringEncoding).js

  return stringOut
}

const browserRaw = runCommand($("~/Library/Application Support/Alfred/Automation/Tasks/com.alfredapp.automation.core/safari/.common/tabs-current").stringByExpandingTildeInPath.js,
  "frontmost_browser", "0", "json")

const clipboardRaw = runCommand("/usr/bin/sqlite3",
  "-newline", "",
  $("~/Library/Application Support/Alfred/Databases/clipboard.alfdb").stringByExpandingTildeInPath.js,
  "SELECT item FROM (SELECT item, MAX(ts) FROM clipboard WHERE dataType = 0 AND item LIKE \"http%\")")

let scriptFilterItems = []

if (browserRaw.length &gt; 0) {
  const browserParsed = JSON.parse(JSON.parse(browserRaw)["alfredworkflow"]["arg"])

  if (browserParsed.url) scriptFilterItems.push({
    title: browserParsed.title,
    subtitle: browserParsed.url,
    icon: { path: "images/browser.png" },
    arg: browserParsed.url
  })
}

if (clipboardRaw.length &gt; 0) {
  scriptFilterItems.push({
    title: "Clipboard URL",
    subtitle: clipboardRaw,
    icon: { path: "images/clipboard.png" },
    arg: clipboardRaw
  })
}

if (scriptFilterItems.length === 0) {
  JSON.stringify({ items: [{
    title: "No URL found",
    subtitle: "Did not find a URL in the clipboard or a supported browser",
    valid: false
  }]})
} else {
  JSON.stringify({ items: scriptFilterItems })
}</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>skipuniversalaction</key>
				<true/>
				<key>subtext</key>
				<string>Download video from popular sources</string>
				<key>title</key>
				<string>Download Video</string>
				<key>type</key>
				<integer>7</integer>
				<key>withspace</key>
				<false/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.input.scriptfilter</string>
			<key>uid</key>
			<string>DC74421D-631A-44B1-AC86-ED7793CADE26</string>
			<key>version</key>
			<integer>3</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>action</key>
				<integer>0</integer>
				<key>argument</key>
				<integer>0</integer>
				<key>focusedappvariable</key>
				<false/>
				<key>focusedappvariablename</key>
				<string></string>
				<key>hotkey</key>
				<integer>0</integer>
				<key>hotmod</key>
				<integer>0</integer>
				<key>hotstring</key>
				<string></string>
				<key>leftcursor</key>
				<false/>
				<key>modsmode</key>
				<integer>0</integer>
				<key>relatedAppsMode</key>
				<integer>0</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.trigger.hotkey</string>
			<key>uid</key>
			<string>822C7F03-3A3A-4842-8C03-72F2D4096BF0</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>acceptsfiles</key>
				<false/>
				<key>acceptsmulti</key>
				<integer>0</integer>
				<key>acceptstext</key>
				<false/>
				<key>acceptsurls</key>
				<true/>
				<key>name</key>
				<string>Download Audio</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.trigger.universalaction</string>
			<key>uid</key>
			<string>B729925C-D828-4631-9988-67499E05791C</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string>require "#{Dir.pwd}/downmedia_functions.rb"

puts get_title_url[:url]</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>2</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>24B8A81E-9901-45A9-B7BC-3D4134C8675A</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>argument</key>
				<string></string>
				<key>passthroughargument</key>
				<true/>
				<key>variables</key>
				<dict>
					<key>media_type</key>
					<string>audio</string>
				</dict>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.argument</string>
			<key>uid</key>
			<string>BFD78A9F-0242-46A6-982A-9DA120AB8328</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>soundname</key>
				<string>Tink</string>
				<key>systemsound</key>
				<true/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.output.playsound</string>
			<key>uid</key>
			<string>B7A122F2-DA1A-4CF7-9990-9F4614C960CC</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>alfredfiltersresults</key>
				<false/>
				<key>alfredfiltersresultsmatchmode</key>
				<integer>0</integer>
				<key>argumenttreatemptyqueryasnil</key>
				<false/>
				<key>argumenttrimmode</key>
				<integer>0</integer>
				<key>argumenttype</key>
				<integer>2</integer>
				<key>escaping</key>
				<integer>0</integer>
				<key>keyword</key>
				<string>{var:download_audio_keyword}</string>
				<key>queuedelaycustom</key>
				<integer>1</integer>
				<key>queuedelayimmediatelyinitially</key>
				<false/>
				<key>queuedelaymode</key>
				<integer>0</integer>
				<key>queuemode</key>
				<integer>1</integer>
				<key>runningsubtext</key>
				<string>Grabbing URLs…</string>
				<key>script</key>
				<string>function runCommand(...arguments) {
  const task = $.NSTask.alloc.init
  const stdout = $.NSPipe.pipe

  task.executableURL = $.NSURL.fileURLWithPath("/usr/bin/env")
  task.arguments = arguments
  task.standardOutput = stdout
  task.launchAndReturnError(false)

  const dataOut = stdout.fileHandleForReading.readDataToEndOfFileAndReturnError(false)
  const stringOut = $.NSString.alloc.initWithDataEncoding(dataOut, $.NSUTF8StringEncoding).js

  return stringOut
}

const browserRaw = runCommand($("~/Library/Application Support/Alfred/Automation/Tasks/com.alfredapp.automation.core/safari/.common/tabs-current").stringByExpandingTildeInPath.js,
  "frontmost_browser", "0", "json")

const clipboardRaw = runCommand("/usr/bin/sqlite3",
  "-newline", "",
  $("~/Library/Application Support/Alfred/Databases/clipboard.alfdb").stringByExpandingTildeInPath.js,
  "SELECT item FROM (SELECT item, MAX(ts) FROM clipboard WHERE dataType = 0 AND item LIKE \"http%\")")

let scriptFilterItems = []

if (browserRaw.length &gt; 0) {
  const browserParsed = JSON.parse(JSON.parse(browserRaw)["alfredworkflow"]["arg"])

  if (browserParsed.url) scriptFilterItems.push({
    title: browserParsed.title,
    subtitle: browserParsed.url,
    icon: { path: "images/browser.png" },
    arg: browserParsed.url
  })
}

if (clipboardRaw.length &gt; 0) {
  scriptFilterItems.push({
    title: "Clipboard URL",
    subtitle: clipboardRaw,
    icon: { path: "images/clipboard.png" },
    arg: clipboardRaw
  })
}

if (scriptFilterItems.length === 0) {
  JSON.stringify({ items: [{
    title: "No URL found",
    subtitle: "Did not find a URL in the clipboard or a supported browser",
    valid: false
  }]})
} else {
  JSON.stringify({ items: scriptFilterItems })
}</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>skipuniversalaction</key>
				<true/>
				<key>subtext</key>
				<string>Download audio from popular sources</string>
				<key>title</key>
				<string>Download Audio</string>
				<key>type</key>
				<integer>7</integer>
				<key>withspace</key>
				<false/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.input.scriptfilter</string>
			<key>uid</key>
			<string>83B54D25-39A4-4BCE-94DA-1DFB84D37270</string>
			<key>version</key>
			<integer>3</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string>require "#{Dir.pwd}/downmedia_functions.rb"

save_pid(Process.pid)
save_query(ARGV[0], ENV['media_type'])
download_url(ARGV[0], ENV['media_type'])</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>2</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>6A286F10-FD49-4463-9540-0EECBE45438D</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>availableviaurlhandler</key>
				<false/>
				<key>triggerid</key>
				<string>download_video</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.trigger.external</string>
			<key>uid</key>
			<string>D8524846-F942-4A77-9461-8BAED974B8CF</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string>function status(isInstalled) {
  return JSON.stringify({ alfredworkflow: {
    variables: { watch_list_installed: isInstalled }
  }})
}

function run(argv) {
  try {
    argv.forEach(file =&gt; Application("com.runningwithcrayons.Alfred").runTrigger("add_file_to_watchlist", { inWorkflow: "com.vitorgalvao.alfred.watchlist", withArgument: file }))
    return status(true)
  } catch {
    return status(false)
  }
}</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>7</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>84E17C6A-F77E-4F2A-B7AD-DA0793F8C416</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>browser</key>
				<string></string>
				<key>skipqueryencode</key>
				<false/>
				<key>skipvarencode</key>
				<false/>
				<key>spaces</key>
				<string></string>
				<key>url</key>
				<string>https://alfred.app/workflows/vitor/watch-list/</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.openurl</string>
			<key>uid</key>
			<string>F9B90B13-958B-44A4-A9B0-9B92E4C6FEE4</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>conditions</key>
				<array>
					<dict>
						<key>inputstring</key>
						<string></string>
						<key>matchcasesensitive</key>
						<false/>
						<key>matchmode</key>
						<integer>0</integer>
						<key>matchstring</key>
						<string></string>
						<key>outputlabel</key>
						<string>Aborted</string>
						<key>uid</key>
						<string>0BC66730-6EE7-4E58-B4AA-61C984B7ED91</string>
					</dict>
				</array>
				<key>elselabel</key>
				<string>Successful</string>
				<key>hideelse</key>
				<false/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.conditional</string>
			<key>uid</key>
			<string>2BACFF19-7459-42F6-B8F4-6CFCA9B3CAFF</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>button1</key>
				<string>Install From the Alfred Gallery</string>
				<key>button2</key>
				<string>Cancel</string>
				<key>button3</key>
				<string></string>
				<key>description</key>
				<string>The Watch List workflow is required to play a stream through it.</string>
				<key>title</key>
				<string>Watch List Not Installed</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.dialog</string>
			<key>uid</key>
			<string>E2D161C0-42E9-4D32-BDE6-FED4C715066F</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>conditions</key>
				<array>
					<dict>
						<key>inputstring</key>
						<string>{var:watch_list_installed}</string>
						<key>matchcasesensitive</key>
						<false/>
						<key>matchmode</key>
						<integer>6</integer>
						<key>matchstring</key>
						<string></string>
						<key>outputlabel</key>
						<string>Missing Watch List</string>
						<key>uid</key>
						<string>EED64F19-BE23-4767-8EEB-AB7DA5278BFC</string>
					</dict>
				</array>
				<key>elselabel</key>
				<string>else</string>
				<key>hideelse</key>
				<true/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.conditional</string>
			<key>uid</key>
			<string>B50278C3-F6C2-4103-A37B-B0901BE5723C</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>argument</key>
				<string></string>
				<key>passthroughargument</key>
				<true/>
				<key>variables</key>
				<dict>
					<key>media_type</key>
					<string>video</string>
				</dict>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.argument</string>
			<key>uid</key>
			<string>C80AD651-BCAF-4B86-869A-D4D847A2379B</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>conditions</key>
				<array>
					<dict>
						<key>inputstring</key>
						<string>{var:add_to_watchlist}</string>
						<key>matchcasesensitive</key>
						<false/>
						<key>matchmode</key>
						<integer>5</integer>
						<key>matchstring</key>
						<string></string>
						<key>outputlabel</key>
						<string>Use WatchList</string>
						<key>uid</key>
						<string>0BC66730-6EE7-4E58-B4AA-61C984B7ED91</string>
					</dict>
				</array>
				<key>elselabel</key>
				<string></string>
				<key>hideelse</key>
				<true/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.conditional</string>
			<key>uid</key>
			<string>F43FB5B8-4078-449C-9631-FE56025810D3</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>delimiter</key>
				<string>
</string>
				<key>discardemptyarguments</key>
				<true/>
				<key>outputas</key>
				<integer>1</integer>
				<key>trimarguments</key>
				<true/>
				<key>variableprefix</key>
				<string></string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.split</string>
			<key>uid</key>
			<string>95D9599B-65C1-410E-85B5-BB36F1676000</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>type</key>
			<string>alfred.workflow.utility.junction</string>
			<key>uid</key>
			<string>A5F1E477-6809-406A-A350-931125A6F529</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>availableviaurlhandler</key>
				<false/>
				<key>triggerid</key>
				<string>download_audio</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.trigger.external</string>
			<key>uid</key>
			<string>D3A7A89F-92D3-4FC6-B561-20BBF3CDE6CE</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>argument</key>
				<string></string>
				<key>passthroughargument</key>
				<true/>
				<key>variables</key>
				<dict>
					<key>media_type</key>
					<string>audio</string>
				</dict>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.argument</string>
			<key>uid</key>
			<string>FD70A114-2767-4782-8D5F-86AC4B3BB8B3</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>0</integer>
				<key>script</key>
				<string>cat "${alfred_workflow_cache}/query.json"</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>11</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>B93448AD-3457-4CBA-B37D-1242E4A92C44</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>alfredfiltersresults</key>
				<false/>
				<key>alfredfiltersresultsmatchmode</key>
				<integer>0</integer>
				<key>argumenttreatemptyqueryasnil</key>
				<false/>
				<key>argumenttrimmode</key>
				<integer>0</integer>
				<key>argumenttype</key>
				<integer>2</integer>
				<key>escaping</key>
				<integer>0</integer>
				<key>keyword</key>
				<string>{var:progress_keyword}</string>
				<key>queuedelaycustom</key>
				<integer>1</integer>
				<key>queuedelayimmediatelyinitially</key>
				<false/>
				<key>queuedelaymode</key>
				<integer>0</integer>
				<key>queuemode</key>
				<integer>1</integer>
				<key>runningsubtext</key>
				<string>Please wait…</string>
				<key>script</key>
				<string>require "#{Dir.pwd}/downmedia_functions.rb"

show_progress</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>skipuniversalaction</key>
				<true/>
				<key>subtext</key>
				<string>Shows progress of the current DownMedia download</string>
				<key>title</key>
				<string>Download Progress</string>
				<key>type</key>
				<integer>2</integer>
				<key>withspace</key>
				<false/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.input.scriptfilter</string>
			<key>uid</key>
			<string>3B69F416-A08B-4618-99B6-E2AED211C9D8</string>
			<key>version</key>
			<integer>3</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string>require "#{Dir.pwd}/downmedia_functions.rb"

kill_download</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>2</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>BDEED30D-47F5-468D-899C-0AD5D4FFAADB</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>conditions</key>
				<array>
					<dict>
						<key>inputstring</key>
						<string>{var:after_kill}</string>
						<key>matchcasesensitive</key>
						<false/>
						<key>matchmode</key>
						<integer>0</integer>
						<key>matchstring</key>
						<string>restart</string>
						<key>outputlabel</key>
						<string>restart</string>
						<key>uid</key>
						<string>D0536D2A-6ED4-4A74-8053-7030F75D665F</string>
					</dict>
				</array>
				<key>elselabel</key>
				<string>abort</string>
				<key>hideelse</key>
				<false/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.conditional</string>
			<key>uid</key>
			<string>879AF67B-0DE2-4574-A27B-A502D1E8A123</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string>require "#{Dir.pwd}/downmedia_functions.rb"

cleanup_tmp_files</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>2</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>A8F4BBFD-E8A8-47D3-AE33-A8823E7CC291</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
	</array>
	<key>readme</key>
	<string>## Usage

Download video from the most recent URL in your [Clipboard History](https://www.alfredapp.com/help/features/clipboard/) or the URL in the frontmost browser tab via the `dv` keyword. Download audio with `da`.

![Download video](images/about/dv.png)

Alternatively, download with the [Universal Action](https://www.alfredapp.com/help/features/universal-actions/).

![Universal action](images/about/ua.png)

Check download progress via the `dp` keyword.

![Download progress](images/about/dp.png)

* &lt;kbd&gt;⌘&lt;/kbd&gt;&lt;kbd&gt;↩&lt;/kbd&gt; Restart download.
* &lt;kbd&gt;⌃&lt;/kbd&gt;&lt;kbd&gt;↩&lt;/kbd&gt; Cancel.</string>
	<key>uidata</key>
	<dict>
		<key>24B8A81E-9901-45A9-B7BC-3D4134C8675A</key>
		<dict>
			<key>xpos</key>
			<real>250</real>
			<key>ypos</key>
			<real>275</real>
		</dict>
		<key>2BACFF19-7459-42F6-B8F4-6CFCA9B3CAFF</key>
		<dict>
			<key>xpos</key>
			<real>1380</real>
			<key>ypos</key>
			<real>535</real>
		</dict>
		<key>3B69F416-A08B-4618-99B6-E2AED211C9D8</key>
		<dict>
			<key>xpos</key>
			<real>495</real>
			<key>ypos</key>
			<real>755</real>
		</dict>
		<key>3E1231DB-0667-46DE-9AD3-523D8837F824</key>
		<dict>
			<key>xpos</key>
			<real>670</real>
			<key>ypos</key>
			<real>65</real>
		</dict>
		<key>6A286F10-FD49-4463-9540-0EECBE45438D</key>
		<dict>
			<key>xpos</key>
			<real>1230</real>
			<key>ypos</key>
			<real>515</real>
		</dict>
		<key>822C7F03-3A3A-4842-8C03-72F2D4096BF0</key>
		<dict>
			<key>note</key>
			<string>Download video in frontmost tab</string>
			<key>xpos</key>
			<real>60</real>
			<key>ypos</key>
			<real>275</real>
		</dict>
		<key>83B54D25-39A4-4BCE-94DA-1DFB84D37270</key>
		<dict>
			<key>xpos</key>
			<real>495</real>
			<key>ypos</key>
			<real>395</real>
		</dict>
		<key>84E17C6A-F77E-4F2A-B7AD-DA0793F8C416</key>
		<dict>
			<key>colorindex</key>
			<integer>12</integer>
			<key>note</key>
			<string>Add to Watch List</string>
			<key>xpos</key>
			<real>1645</real>
			<key>ypos</key>
			<real>515</real>
		</dict>
		<key>879AF67B-0DE2-4574-A27B-A502D1E8A123</key>
		<dict>
			<key>xpos</key>
			<real>905</real>
			<key>ypos</key>
			<real>775</real>
		</dict>
		<key>897635FA-F5E6-4554-A0FE-0A84D9156F9C</key>
		<dict>
			<key>xpos</key>
			<real>495</real>
			<key>ypos</key>
			<real>35</real>
		</dict>
		<key>95D9599B-65C1-410E-85B5-BB36F1676000</key>
		<dict>
			<key>xpos</key>
			<real>1570</real>
			<key>ypos</key>
			<real>545</real>
		</dict>
		<key>A5F1E477-6809-406A-A350-931125A6F529</key>
		<dict>
			<key>xpos</key>
			<real>670</real>
			<key>ypos</key>
			<real>545</real>
		</dict>
		<key>A8F4BBFD-E8A8-47D3-AE33-A8823E7CC291</key>
		<dict>
			<key>xpos</key>
			<real>1020</real>
			<key>ypos</key>
			<real>875</real>
		</dict>
		<key>B50278C3-F6C2-4103-A37B-B0901BE5723C</key>
		<dict>
			<key>colorindex</key>
			<integer>12</integer>
			<key>xpos</key>
			<real>1805</real>
			<key>ypos</key>
			<real>545</real>
		</dict>
		<key>B729925C-D828-4631-9988-67499E05791C</key>
		<dict>
			<key>xpos</key>
			<real>495</real>
			<key>ypos</key>
			<real>275</real>
		</dict>
		<key>B7A122F2-DA1A-4CF7-9990-9F4614C960CC</key>
		<dict>
			<key>xpos</key>
			<real>250</real>
			<key>ypos</key>
			<real>395</real>
		</dict>
		<key>B93448AD-3457-4CBA-B37D-1242E4A92C44</key>
		<dict>
			<key>xpos</key>
			<real>1020</real>
			<key>ypos</key>
			<real>755</real>
		</dict>
		<key>BDEED30D-47F5-468D-899C-0AD5D4FFAADB</key>
		<dict>
			<key>xpos</key>
			<real>730</real>
			<key>ypos</key>
			<real>755</real>
		</dict>
		<key>BFD78A9F-0242-46A6-982A-9DA120AB8328</key>
		<dict>
			<key>xpos</key>
			<real>670</real>
			<key>ypos</key>
			<real>305</real>
		</dict>
		<key>C80AD651-BCAF-4B86-869A-D4D847A2379B</key>
		<dict>
			<key>xpos</key>
			<real>455</real>
			<key>ypos</key>
			<real>545</real>
		</dict>
		<key>D3A7A89F-92D3-4FC6-B561-20BBF3CDE6CE</key>
		<dict>
			<key>xpos</key>
			<real>60</real>
			<key>ypos</key>
			<real>635</real>
		</dict>
		<key>D8524846-F942-4A77-9461-8BAED974B8CF</key>
		<dict>
			<key>xpos</key>
			<real>60</real>
			<key>ypos</key>
			<real>515</real>
		</dict>
		<key>DC74421D-631A-44B1-AC86-ED7793CADE26</key>
		<dict>
			<key>xpos</key>
			<real>495</real>
			<key>ypos</key>
			<real>155</real>
		</dict>
		<key>E2D161C0-42E9-4D32-BDE6-FED4C715066F</key>
		<dict>
			<key>colorindex</key>
			<integer>12</integer>
			<key>xpos</key>
			<real>1880</real>
			<key>ypos</key>
			<real>535</real>
		</dict>
		<key>F43FB5B8-4078-449C-9631-FE56025810D3</key>
		<dict>
			<key>xpos</key>
			<real>1495</real>
			<key>ypos</key>
			<real>545</real>
		</dict>
		<key>F9B90B13-958B-44A4-A9B0-9B92E4C6FEE4</key>
		<dict>
			<key>colorindex</key>
			<integer>12</integer>
			<key>xpos</key>
			<real>2045</real>
			<key>ypos</key>
			<real>515</real>
		</dict>
		<key>FD70A114-2767-4782-8D5F-86AC4B3BB8B3</key>
		<dict>
			<key>xpos</key>
			<real>455</real>
			<key>ypos</key>
			<real>665</real>
		</dict>
	</dict>
	<key>userconfigurationconfig</key>
	<array>
		<dict>
			<key>config</key>
			<dict>
				<key>default</key>
				<string>dv</string>
				<key>placeholder</key>
				<string></string>
				<key>required</key>
				<false/>
				<key>trim</key>
				<true/>
			</dict>
			<key>description</key>
			<string></string>
			<key>label</key>
			<string>Download Video Keyword</string>
			<key>type</key>
			<string>textfield</string>
			<key>variable</key>
			<string>download_video_keyword</string>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>default</key>
				<string>da</string>
				<key>placeholder</key>
				<string></string>
				<key>required</key>
				<false/>
				<key>trim</key>
				<true/>
			</dict>
			<key>description</key>
			<string></string>
			<key>label</key>
			<string>Download Audio Keyword</string>
			<key>type</key>
			<string>textfield</string>
			<key>variable</key>
			<string>download_audio_keyword</string>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>default</key>
				<string>dp</string>
				<key>placeholder</key>
				<string></string>
				<key>required</key>
				<false/>
				<key>trim</key>
				<true/>
			</dict>
			<key>description</key>
			<string></string>
			<key>label</key>
			<string>Progress Keyword</string>
			<key>type</key>
			<string>textfield</string>
			<key>variable</key>
			<string>progress_keyword</string>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>default</key>
				<string>~/Downloads</string>
				<key>filtermode</key>
				<integer>1</integer>
				<key>placeholder</key>
				<string></string>
				<key>required</key>
				<false/>
			</dict>
			<key>description</key>
			<string></string>
			<key>label</key>
			<string>Download Folder</string>
			<key>type</key>
			<string>filepicker</string>
			<key>variable</key>
			<string>download_dir</string>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>default</key>
				<true/>
				<key>required</key>
				<false/>
				<key>text</key>
				<string>Send downloads to Watch List workflow</string>
			</dict>
			<key>description</key>
			<string></string>
			<key>label</key>
			<string>Add to Watch List</string>
			<key>type</key>
			<string>checkbox</string>
			<key>variable</key>
			<string>add_to_watchlist</string>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>default</key>
				<string>best</string>
				<key>pairs</key>
				<array>
					<array>
						<string>Best</string>
						<string>best</string>
					</array>
					<array>
						<string>MP3</string>
						<string>mp3</string>
					</array>
					<array>
						<string>AAC</string>
						<string>aac</string>
					</array>
					<array>
						<string>FLAC</string>
						<string>flac</string>
					</array>
					<array>
						<string>Apple Lossless</string>
						<string>alac</string>
					</array>
					<array>
						<string>M4A</string>
						<string>m4a</string>
					</array>
					<array>
						<string>Opus</string>
						<string>opus</string>
					</array>
					<array>
						<string>Vorbis</string>
						<string>vorbis</string>
					</array>
					<array>
						<string>WAV</string>
						<string>wav</string>
					</array>
				</array>
			</dict>
			<key>description</key>
			<string>Does not apply when downloading video.</string>
			<key>label</key>
			<string>Audio Format</string>
			<key>type</key>
			<string>popupbutton</string>
			<key>variable</key>
			<string>audio_only_format</string>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>default</key>
				<string>bestvideo*[ext=mp4]+bestaudio[ext=m4a]/best[ext=mp4]/bestvideo*+bestaudio/best</string>
				<key>placeholder</key>
				<string></string>
				<key>required</key>
				<false/>
				<key>trim</key>
				<true/>
			</dict>
			<key>description</key>
			<string>Reference the yt-dlp documentation for options. Be sure to specify an extension for file name predictability when adding to Watch List.</string>
			<key>label</key>
			<string>Advanced Format</string>
			<key>type</key>
			<string>textfield</string>
			<key>variable</key>
			<string>advanced_format</string>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>default</key>
				<string>%(title)s.%(ext)s</string>
				<key>placeholder</key>
				<string></string>
				<key>required</key>
				<false/>
				<key>trim</key>
				<true/>
			</dict>
			<key>description</key>
			<string>Name format for downloaded files. Reference the yt-dlp Output Template documentation.</string>
			<key>label</key>
			<string>Title Template</string>
			<key>type</key>
			<string>textfield</string>
			<key>variable</key>
			<string>single_title_template</string>
		</dict>
	</array>
	<key>version</key>
	<string>25.1</string>
	<key>webaddress</key>
	<string>https://github.com/vitorgalvao/download-media-workflow/</string>
</dict>
</plist>
